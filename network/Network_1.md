# Network 1.

---

혼공 Network

---

# 1-1 네트워크를 알아야 하는 이유

> 개인적인 생각으론, 나는 네트워크로 데이터 통신을 하는데, 어렴풋 사용법 말고도 방식도 알아야 한다고 생각 했음
> 

### 컴퓨터 네트워크

여러개의 장치가 그물처럼 서로 연결되어 정보를 주고 받을 수 있는 통신망

### 인터넷

연결된 장치 뿐만 아니라 멀리 떨어진 장치와 통신할 수 있도록 하는 기술
→ 네트워크의 네트워크

- 개발자가 네트워크를 알아야 하는 이유

개발자의 업무를 크게 두개로 나눌 수 있다고 봄

1. 프로그램을 만드는 업무
    
    네트워크의 배경 지식이 있어야만 활용할 수 있는 프레임워크나 라이브러리가 있음
    
    TCP/UDP의 지식이 없다면 스프링 프레임워크를 제대로 이해하기 어려움
    
    HTTP, 쿠키에 대한 이해가 없어도 활용하기 어려움
    
2. 프로그램을 유지 보수하는 업무
    
    네트워크 관련 트러블 슈팅 시 해결의 실마리가 될 수 있음
    

이 책을 완독하고 스스로 답변해보자

1. DNS의 정의와 동작 과정에 대해 설명
2. TCP와 UDP의 차이?
3. HTTP와 HTTPS의 차이

# 1-2 네트워크 거시적으로 살펴보기

### 네트워크의 기본 구조

모든 네트워크는 노드와 노드를 연결하는 간선, 노드간 주고받는 메세지로 구성됨

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled.png)

- 호스트 : 네트워크의 가장자리에 위치한 노드
네트워크를 통해 흐르는 정보를 최초로 생성 및 송신하고 수신함 (기기는 무엇이든 될 수 있음)

이를 호스트라고 일컫음

- 서버 : ‘어떠한 서비스’를 제공하는 `호스트`
- 클라이언트 : ‘어떠한 서비스’를 요청하고 서버의 응답을 제공받는 `호스트`
- 네트워크 장비
    
    네트워크가 호스트만 있진 않음
    
    중간노드에 대해 알아볼건데 `네트워크 장비` 라고 통칭하겠음
    
    `호스트` 간 메세지를 안정, 안전적이게 송수신하도록 도와줌
    
    (이더넷 허브, 라우터, 스위치, 공유기 등)
    
- 통신 매체 : 노드를 연결하는 간선 (유무선으로 되어있음)
- 메세지 : 주고 받는 정보

네트워크 구성 요소 끝

### 범위에 따른 네트워크 분류

크기에 따라 달라짐 기업, 국가, 도시 등등…

- LAN (Local Area Network)
    
    가까운 지역을 연결한 근거리 통신망
    
    ex) 가정, 기업, 학교처럼 한정된 공간의 네트워크
    
- WAN (Wide Area Network)
    
    먼 지역을 연결하는 광역 통신망
    
    ISP 업체가 구축하고 관리함 (KT, LG U+, SKT등)
    
- CAN (Campus Area Network)
    
    학교 또는 회사 단위 규모의 네트워크
    
- MAN (Metropolitan Area Network)
    
    도시단위 규모 네트워크
    

### 메세지 교환 방식에 따른 네트워크 분류

회선 교환 방식, 패킷 교환 방식으로 나눌 수 있음

각 방식을 사용하는 네트워크를 회선 교환 네트워크, 패킷 교환 네트워크라고 부름

- 회선 교환 방식 (circuit switching)
    
    메세지 전송로 회선을 설정하고 이를 통해 주고 받는 방식
    
    → 회선을 설정 ≒ 호스트가 연결 됨 ≒ 전송로를 확보 했음
    
    예를 들어 A와 B가 데이터를 주고 받을 때 회선을 먼저 정함 (붉은 선)
    
    ![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%201.png)
    
    연결을 확보 한 뒤 메세지를 주고 받기에 주어진 시간 동안 전송되는 정보의 양이 일정함
    
    회선 교환 네트워크가 올바르게 동작하려면 호스트 간 회선을 적절히 설정해야함.
    
    이 역할은 회선 스위치가 해줌 (1:1 전송로 확보)
    
    단점으론 회선을 점유하고 있지 않으면 데이터 주고 받지 못함
    
    A와 B가 연결되어 있으면 C가 A에게 메세지를 주지 못함
    
    (예시로 전화)
    

- 패킷 교환 방식 (packet switching)
    
    회선 교환의 문제점을 해결하려 고안됨
    
    패킷이라는 작은 단위로 쪼개서 송수신하는 방식 (현재 거의 대부분 이 방식임)
    
    예를들어 2GB 영화를 다운받는다고 할 때, 패킷으로 쪼개져서 받게 됨
    
    쪼개서 받은걸 이제 받은 클라이언트가 재조립하는거임
    
    회선을 점유하지 않기에 효율이 좋음
    
    멀리 데이터를 보낸다고 치자.
    
    회선을 엄~~~~~~청 거쳐야 하지 않을까?
    
    예를 들면 무신사에서 택배를 보내면 바로 유저한테 도달하는게 아니다.
    
    보낼 택배를 수거하고, 잡화처리하고 관할 센터에서 대전 허브로 보내고 다시 유저 동네의 관할 센터가가 인수받아서 기사님이 문 앞까지 보내준더ㅏ.
    
    여기서 라우터와 스위치가 관할 센터와 허브 역할을 해준다.
    
    여기서 이제 어디로 가는지를 알려면 택배에선 운송장이 패킷에도 존재한다.
    
    보내는 데이터 (물품) `페이로드 payload` 
    
    `헤더` 와 `트레일러` 가 운송장 역할을 해준다,.
    

### 주소와 송수신지 유형에 따른 전송 방식

헤더에 담기는 대표적인 정보는 주소임

송수신자를 특정하는 정보가 있음.

수신지는 하나가 될 수도 있고, 네트워크 내 모든 호스트가 될 수도 있음

전송 방식은 유니캐스트와 브로드캐스트가 있음

- 유니 캐스트
    
    일반적인 형태 : 하나의 수신자에 메세지를 전송하는 방식 : 송신자 수신자 1:1임
    
- 브로드 캐스트
    
    자신을 제외한 모든 호스트에게 전송하는 방식
    
    전송 범위를 브로드캐스트 도메인이라고 함
    
- 멀티캐스트
    
    네트워크 내 ‘동일 그룹’에만 속한 호스트에게 전송하는 방식
    
- 애니캐스트
    
    동일 그룹 내 가장 가까운 호스트에게 전송하는 방식
    

등등 다양히 있는데 가장 많이 언급할 방식은 유니, 브로드임

# 1-3 네트워크 미시적으로 살펴보기

### 프로토콜

노드 간 정보를 올바르게 주고 받기 위해 합의된 규칙이나 방법

영국인 미국인 - 영어로 의사소통 가능 : 이를 프로토콜이라고 봐도 무방함

서로 다른 통신 장치들이 정보를 주고 받으려면 프로토콜이 일치해야 함

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%202.png)

모든 프로토콜에는 저마다의 목적과 특징이 있음

HTTP, HTTPS, UDP, TCP 등등… 나중에 다뤄본대요

### 네트워크 참조 모델

통신이 일어나는 과정을 계층으로 나눈 구조를 네트워크 참조 모델이라고 함

: 네트워크 계층 모델이라고도 함

택배 과정을 생각하면 비슷하다고 보면 됨

1. 물품을 준비
2. 물품 포장
3. 택배 상자에 탑재
4. 밀봉
5. 운송장 부착
6. 기사가 수거해서 전달

받을때는 역과정

통신 과정을 나눈 이유는 크게 두가지

1. 네트워크 구성과 설계가 용이
    
    각 계층이 수행해야 할 역할이 정해져 있으므로 계층의 목적과 맞게 프로토콜과 네트워크 장비를 계층별로 구성 가능
    
    ex) 2계층의 목적에 맞는 프로토콜과 네트워크 장비, 3계층에 역할에 맞는 각각 프로토콜과 장비를 사용
    
    → 답안이 있듯이 완벽히 들어맞는건 아니다. 특히 네트워크 장비는 상위 계층 장비가 하위 계층 장비의 역할을 포괄해서 수행하는 경우도 있음
    
2. 네트워크 문제 진단과 해결이 용이
    
    통신 과정엑서 문제가 있을 때 원인을 계층 별로 진단하기 수월함
    
    갑자기 인터넷이 안됨 ? → 1계층의 케이블 등 유무선 매체의 접속 상태 확인
    
    → 2계층이 정보의 수신지까지 잘 갔는지 확인 → 3계층… 이런식으로 진단 함
    

### OSI 모델

국제 표준화 기구에서 만든 네트워크 참조 모델

통신을 7계층으로 나눴을 때 각각 물리 계층, 데이터 링크 계층, 네트워크 계층, 전송 계층, 세션 계층, 표현 계층, 응용 계층으로 나눌 수 있음

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%203.png)

1. 물리 계층
    
    OSI 최하단 계층으로 1과 0으로 비트 신호를 주고 받는 계층
    
    통신 매체에 맞는 신호로 운반되도록 데이터의 변환이 이뤄지고 통신 매체를 통한 송수신이 이뤄지는 계층임
    
2. 데이터 링크 계층
    
    네트워크 내 주변 장치 간의 정보를 올바르게 주고 받기 위한 계층
    
    LAN 기술이 데이터 링크 계층에 많이 접목되어 있음.
    
    물리 계층의 오류가 없는지 확인하고 MAC 주소를 통해 네트워크 내 송수신자를 특정할 수 있음. 때로는 전송과정 충돌 문제를 해결함
    
3. 네트워크 계층
    
    메세지를 다른 네트워크의 수신지까지 전달하는 계층
    
    링크 계층에서 같은 네트워크 → 네트워크 계층에선 네트워크 간 통신
    
    : 인터넷을 가능케하는 계층임 IP주소로 통신하고자 하는 수신지 호스트와 네트워크를 식별하고 원하는 수신지에 도달하기 위한 최적의 경로를 결정
    
4. 전송 계층
    
    신뢰성 있고, 안정성 있는 전송을 할 때 필요한 계층
    
    패킷이 정상적인 송수신, 유실된 정보, 패킷의 순서를 확인
    
    전송 계층에서 패킷의 흐름을 제어하거나 전송 오류를 점검 해 신뢰성 있고, 안정적 송신을 이루게 함. 포트를 통해 실행 중인 응용 프로그램의 식별을 함
    
5. 세션 계층
    
    세션 관리하기 위한 계층
    
    세션 : 일반적으로 통신을 주고 받는 호스트의 응용 프로그램 간 연결 상태를 의미
    
    연결 상태를 생성하거나 유지, 종료 했을 때, 끊어주는 역할을 함
    

1. 표현 계층
    
    번역가와 같은 역할을 하는 계층 (컴파일러 ?)
    
    코드를 변환하거나 압축 암호화 같은 작업이 이루어짐
    

1. 응용 계층
    
    OSI 최상단 계층으로 사용자 및 응용 프로그램에서 가장 밀접한 계층
    
    다양한 네트워크 서비스를 제공해 줌
    
    ex ) 웹 브라우저에서 웹 페이지 제공, 이메일을 제공하거나 실질적인 네트워크 서비스를 제공하는 계층
    
    다양한 서비스를 제공하는 만큼 많은 프로토콜이 있음
    

### TCP/IP 모델

OSI가 이론에 가까웠다면 TCP/IP는 구현에 중점을 둠

(OSI)이상적 설계 ↔ (TCP/IP)실용적 구현

TCP/IP 모델은 TCP/IP 4계층, 인터넷 프로토콜 스위트, TCP/IP 프로토콜 스택이라고도 부름

TCP, IP도 프로토콜이고 IP는 인터넷 프로토콜의 약자

> 프로토콜 스위트, 프로토콜 스택?
다양한 계층의 프로토콜 집합.
> 

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%204.png)

1. 네트워크 엑세스 계층
    
    = 링크 계층 = 네트워크 인터페이스 계층
    
    OSI 데이터 링크 계층과도 유사
    
    전통적인 TCP/IP 모델에서 최하위 계층은 OSI 모델에서의 물리 계층보다 데이터 링크 계층 역할을 수행하는 쪽에 가까웠음
    
    TCP/IP모델에는 OSI모델의 물리 계층의 개념이 없다는 견해도 있음
    
    그래서 많은 공식 문서와 전공 서적에는 OSI 모델과 TCP/IP모델을 대응하여 설명하기 위해 5계층으로 확장해서 설명하는 경우도 있음
    
2. 인터넷 계층
    
    OSI 네트워크 계층과 유사함. 3장에서 다룰 것
    
3. 전송 계층
    
    OSI 전송 계층과 유사 4장에서 다룰 것
    
4. 응용 계층
    
    OSI 모델의 세션, 표현, 응용 계층을 합친 것과 유사 5장에서 다룸
    

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%205.png)

### 캠슐화와 역캡슐화

프로토콜, 네트워크 참조 모델 토대로 실제로 패킷이 어떻게 송수신되는지 알아보겠음

송신 과정에서 `캡슐화`, 수신 과정에서 `역캡슐화`가 이루어짐

송신 과정에서 가장 높은 계층에서 하위계층으로 데이터가 이동하고 수신 과정에선 하위계층에서 높은 계층으로 이동해서 수신하게 됨

이때 패킷으로 데이터가 송수신 된다고 했다.

패킷은 헤더와 페이로드, 트레일러로 구성되어있음

프로토콜의 목적과 특징에 따라 헤더의 내용은 달라짐

정보를 송신할 때 상위 계층으로 부터 내려온 패킷을 페이로드 삼아 프로토콜에 걸맞은 헤더 or 트레일러를 덧붙여 하위 계층으로 전달함

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%206.png)

이런식으로 말이죠

송신 과정에서 헤더 or 트레일러를 추가해 나가는 과정을 캡슐화라고 함 (인캡슐레이션)

반대로 역캡슐화를 보자 (디캡슐레이션)

쉽게 받는 입장에서 생각해보면 됨 : 헤더와 트레일러를 제거해나가는 과정

![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%207.png)

### PDU

각 계층에서 송수신 되는 메세지의 단위를 `PDU`(Protocol Data Unit)이라고 함

상위 계층에서 전달 받은 데이터에 현재 계층이 프로토콜 헤더를 추가하면 현재 계층의 PDU가 됨

![OSI 모델의 각 계층의 PDU](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%208.png)

OSI 모델의 각 계층의 PDU

PDU는 주로 전송 계층 이하의 메세지를 구분하기 위해 사용함
전송 계층보다 높은 계층에서는 일반적으로 데이터 혹은 메시지로만 자칭하는 경우가 많음

전송 계층의 PDU는 TCP 프로토콜이 사용되었을 경우에는 세그먼트, UDP 프로토콜이 사용되었을 경우에는 데이터 그램이 됨

![전체적인 네트워크 통신 과정](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%209.png)

전체적인 네트워크 통신 과정

### ETC 1. OSI 7계층, TCP/IP 4계층은 사실 아무것도 안함

네트워크 참조 모델은 반드시 지켜야하는 규칙일거같은데,

사실 그렇지도 않음 가이드라인에 불과하지 꼭 지켜야하는 건 아님

말 그대로 `참조` 모델이기에 모든 모델이 특정 계층에 완벽히 대응되진 않음

### ETC 2. 트래픽과 네트워크 성능 지표

`트래픽` : 네트워크 내의 정보량

특정 노드에 트래픽이 몰린다면 해당 노드가 특정 시간 동안 처리해야 할 정보가 많다는 뜻

→ 과부하를 야기함

네트워크 성능을 평가할 수 있는 세가지 대중적인 지표

1. 처리율
    
    ![Untitled](Network%201%201a3c4ead07454aef87a6d02d72135c2f/Untitled%2010.png)
    
    단위 시간당 네트워크를 통해 실제로 전송되는 정보량을 뜻함
    
    bps, Mbps, Gbps 단위로 일반적으로 표현.  초당 패킷 수 pps를 사용하기도 함
    
    실시간성이 강조된 지표로, 특정 노드가 얼마나 트래픽을 처리하는 중인지 판단하기 위해 사용되는 경우가 많음
    

1. 대역폭
    
    신호 처리 영역에서 정의와 네트워크 성능 측정 영역에서 정의가 다소 다름
    
    전자는 주파수 범위, 후자는 단위 시간 동안 통신 매체를 통해 송수신할 수 있는 최대 정보량을 뜻함
    
    처리율과 같이 bps 등 단위를 사용함
    
    높은 대역폭이 있다면 많은 정보를 송수신 할 능력이 있다는 뜻
    
2. 패킷 손실
    
    송수신 된 패킷이 손실된 상황을 의미
    
    높은 트래픽으로 인해 노드가 순간적으로 처리해야 할 패킷이 너무 많거나
    네트워크 장애로 패킷을 처리하지 못하면 패킷이 손실 됨
    
    전채 패킷 중 유실 된 패킷을 백분위로 표현한 값을 사용함
    

---

## 정리

프로토콜 : 노드 간의  합의된 규칙이나 방법 : 목적과 특징이 달라 헤더에 포함되는 정보가 달라짐

네트워크 참조 모델 : 네트워크 전송 단계를 계층적으로 표현 한 것

OSI 모델 : 통신 과정을 7개의 계층으로 표현

TCP/IP 모델 : 통신 과정을 4개의 계층으로 표현

PUD : 각 계층에서 송수신되는 메시지 단위